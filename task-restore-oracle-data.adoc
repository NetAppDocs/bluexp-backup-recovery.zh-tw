---
sidebar: sidebar 
permalink: task-restore-oracle-data.html 
keywords: restore, Azure, Amazon Web services, Oracle database 
summary: 您可以將Oracle資料庫從雲端還原至內部部署SnapCenter 的支援服務器。 
---
= 還原Oracle資料庫
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
您可以將 Oracle 資料庫還原至原始位置或其他位置。對於 RAC 資料庫、資料會還原至建立備份的內部部署節點。

僅支援具有控制檔還原的完整資料庫。如果檔案記錄未出現在檔案管理系統中、您應該指定包含還原所需的歸檔記錄的位置。


IMPORTANT: 不支援單一檔案還原（SFR）。

*步驟*

. 在BlueXP UI中、按一下* Protection *>* Backup and recovery *>* Applications*。
. 在*篩選條件*欄位中、選取篩選條件*類型*、然後從下拉式清單中選取* Oracle*。
. 按一下您要還原之資料庫的*檢視詳細資料*、然後按一下*還原*。
. 在「還原選項」頁面中、指定您要還原資料庫檔案的位置。
+
|===
| 如果您... | 執行此動作... 


 a| 
想要還原至原始位置
 a| 
.. 選取 * 還原至原始位置 * 。
.. 如果快照位於歸檔儲存設備中、請選擇從歸檔儲存設備還原資料的優先順序。
.. 單擊 * 下一步 * 。
.. 如果要將資料庫狀態變更為執行還原與還原作業所需的狀態、請選取*資料庫狀態*。
+
從高到低的資料庫狀態會開啟、掛載、啟動和關機。

+
*** 如果資料庫處於較高的狀態、但必須將狀態變更為較低的狀態才能執行還原作業、則必須選取此核取方塊。
*** 如果資料庫處於較低的狀態、但必須將狀態變更為較高的狀態才能執行還原作業、即使您未選取此核取方塊、資料庫狀態也會自動變更。
*** 如果資料庫處於開啟狀態、而還原資料庫需要處於掛載狀態、則只有在選取此核取方塊時、資料庫狀態才會變更。


.. 指定恢復範圍。
+
*** 如果您要恢復到最後一筆交易、請選取 * 所有記錄 * 。
*** 如果您想要恢復到特定 SCN 、請選取 * 直到 SCN （系統變更編號） * 。
*** 如果您想要恢復到特定的資料和時間、請選取 * 日期和時間 * 。
+
您必須指定資料庫主機時區的日期和時間。

*** 如果不想恢復，請選擇 * 無恢復 * 。


.. 如果作用中檔案系統中沒有歸檔記錄檔、您應該指定包含還原所需之歸檔記錄檔的位置。
.. 如果您要在恢復後開啟資料庫、請選取此核取方塊。
+
在RAC設定中、只有用於還原的RAC執行個體會在還原後開啟。





 a| 
想要暫時還原到另一個儲存設備、然後將還原的檔案複製到原始位置
 a| 
.. 選取 * 還原至原始位置 * 。
.. 如果快照位於歸檔儲存設備中、請選擇從歸檔儲存設備還原資料的優先順序。
.. 選取 * 變更儲存位置 * 。
+
如果您選取 * 變更儲存位置 * 、您可以將尾碼附加至目的地磁碟區。如果尚未選中該複選框，則默認情況下會將 *_restore * 附加到目標卷。

.. 單擊 * 下一步 * 。
.. 在「儲存設備對應」頁面中、指定從物件存放區還原的資料將暫時儲存在的替代儲存位置詳細資料。
+
如果您選取內部部署 ONTAP 系統、且未設定叢集連線至物件儲存設備、系統會提示您提供有關物件儲存區的其他資訊。

.. 單擊 * 下一步 * 。
.. 如果要將資料庫狀態變更為執行還原與還原作業所需的狀態、請選取*資料庫狀態*。
+
從高到低的資料庫狀態會開啟、掛載、啟動和關機。

+
*** 如果資料庫處於較高的狀態、但必須將狀態變更為較低的狀態才能執行還原作業、則必須選取此核取方塊。
*** 如果資料庫處於較低的狀態、但必須將狀態變更為較高的狀態才能執行還原作業、即使您未選取此核取方塊、資料庫狀態也會自動變更。
*** 如果資料庫處於開啟狀態、而還原資料庫需要處於掛載狀態、則只有在選取此核取方塊時、資料庫狀態才會變更。


.. 指定恢復範圍。
+
*** 如果您要恢復到最後一筆交易、請選取 * 所有記錄 * 。
*** 如果您想要恢復到特定 SCN 、請選取 * 直到 SCN （系統變更編號） * 。
*** 如果您想要恢復到特定的資料和時間、請選取 * 日期和時間 * 。
+
您必須指定資料庫主機時區的日期和時間。

*** 如果不想恢復，請選擇 * 無恢復 * 。


.. 如果作用中檔案系統中沒有歸檔記錄檔、您應該指定包含還原所需之歸檔記錄檔的位置。
.. 如果您要在恢復後開啟資料庫、請選取此核取方塊。
+
在RAC設定中、只有用於還原的RAC執行個體會在還原後開啟。





 a| 
想要還原至其他位置
 a| 
.. 選取 * 還原至其他位置 * 。
.. 如果快照位於歸檔儲存設備中、請選擇從歸檔儲存設備還原資料的優先順序。
.. 如果您想要還原至其他儲存設備、請執行下列步驟：
+
... 選取 * 變更儲存位置 * 。
+
如果您選取 * 變更儲存位置 * 、您可以將尾碼附加至目的地磁碟區。如果尚未選中該複選框，則默認情況下會將 *_restore * 附加到目標卷。

... 單擊 * 下一步 * 。
... 在「儲存設備對應」頁面中、指定物件存放區中的資料需要還原的替代儲存位置詳細資料。


.. 單擊 * 下一步 * 。
.. 在「目的地主機」頁面中、選取要掛載資料庫的主機。
+
... （選用）如果是 NAS 環境、請指定要將從物件存放區還原的磁碟區匯出到的主機的 FQDN 或 IP 位址。
... （可選）對於 SAN 環境、請指定主機的啟動器、以將從物件存放區還原的磁碟區 LUN 對應到該主機的啟動器。


.. 單擊 * 下一步 * 。


|===
. 檢閱詳細資料、然後按一下*還原*。


.結果
「 * 還原到替代位置 * 」選項會將選取的備份裝載到指定的主機上。您應該手動開啟資料庫。

掛載備份之後、您必須先卸載備份、才能再次掛載備份。您可以使用 UI 中的 *Unmount* 選項來卸載備份。

如需有關如何啟動 Oracle 資料庫的資訊、請參閱： https://kb.netapp.com/Advice_and_Troubleshooting/Cloud_Services/Cloud_Manager/How_to_bring_up_Oracle_Database_in_another_NFS_host_after_mounting_storage_from_backup_in_Cloud_Backup_for_Applications["知識庫文章"]。


NOTE: 如果還原作業未完成，請勿再次嘗試還原程序，直到「工作監控」顯示還原作業失敗為止。如果您在「工作監視器」顯示還原作業失敗之前再次嘗試還原程序，還原作業將會再次失敗。當您看到「工作監控」狀態為「失敗」時，可以再次嘗試還原程序。
